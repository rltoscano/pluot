<html>
  <head>
    <title>pluot-edit test</title>
    <script src="/bower_components/webcomponentsjs/webcomponents-loader.js"></script>
    <link rel="import" href="/src/pluot-app/pluot-edit.html">
    <!-- Ensure Web Animations polyfill is loaded since neon-animation 2.0 doesn't import it -->
    <link rel="import" href="/bower_components/neon-animation/web-animations.html">
    <script src="../../bower_components/web-component-tester/browser.js"></script>
  </head>
  <body>

    <test-fixture id="PopulatedDialog">
      <template>
        <pluot-edit txn='{"displayName": "", "category": null}'></pluot-edit>
      </template>
    </test-fixture>

    <script>
      suite('pluot-category', function() {

        test('unset code', function(done) {
          var el = fixture('PopulatedDialog');
          assert.equal(el.txn.category, null);
          var cat = el.shadowRoot.querySelector('pluot-category');
          assert.equal(cat.code, null);
          // Set just a new category, make sure pluot-category updates.
          el.set('txn.category', 4);
          flush(function() {
            assert.equal(cat.code, 4);
            done();
          });
        });

      });

    </script>
  </body>
</html>
