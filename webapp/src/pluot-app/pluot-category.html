<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../pluot-app/pluot-globals.html">

<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">

<dom-module id="pluot-category">
  <template>
    <style></style>

    <pluot-globals id="globals" categories="{{categories}}"></pluot-globals>

    <paper-dropdown-menu label="Category">
      <paper-listbox slot="dropdown-content" attr-for-selected="code" selected="{{_model}}">
        <template is="dom-repeat" items="[[categories]]" as="category">
          <paper-item code$="[[category.code]]">[[category.displayName]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>

  </template>

  <script>
    class PluotCategory extends Polymer.Element {
      static get is() { return 'pluot-category'; }
      static get properties() {
        return {
          code: { type: Number, notify: true, value: null, observer: '_observeCode' },
          _model: { type: String, value: null, observer: '_observeModel' },
        };
      }
      _observeCode(newValue) { this._model = newValue; }
      _observeModel(newValue) { this.code = (newValue == null) ? null : parseInt(newValue); }
    }
    window.customElements.define(PluotCategory.is, PluotCategory);
  </script>
</dom-module>
